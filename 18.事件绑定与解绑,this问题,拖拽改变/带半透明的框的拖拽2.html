<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>带半透明的框的拖拽</title>
<style>
*{ margin:0; padding:0; list-style:none; font-family: "微软雅黑","张海山锐线体简"}
#div1{width:200px;height:200px;background:red; position:absolute;left:0;top:0;}

</style>
<script>
window.onload=function(){
	var oDiv=document.getElementById('div1');
	oDiv.onmousedown=function(ev){
		var oEvt=ev||event;	
		var disX=oEvt.clientX-oDiv.offsetLeft;
		var disY=oEvt.clientY-oDiv.offsetTop;
		
		//2.按下down时，创建框/透明div,规定其样式，位置，并丢到页面上
		var newDiv=oDiv.cloneNode();//还在js里
		newDiv.style.opacity=0.5;
		document.body.appendChild(newDiv);
		
		document.onmousemove=function(ev){
			var oEvt=ev||event;	
			//3.移动move时，移动框/透明div
			newDiv.style.left=oEvt.clientX-disX+'px'; 	
			newDiv.style.top=oEvt.clientY-disY+'px'; 	
		};
		document.onmouseup=function(){
			//4.抬起up时，设置oDiv的位置等于框/透明div，并删除框/透明div
			oDiv.style.left=newDiv.offsetLeft+'px';
			oDiv.style.top=newDiv.offsetTop+'px';
			document.body.removeChild(newDiv);
			
			document.onmouseup=	document.onmousemove=null;
			oDiv.releaseCapture && oDiv.releaseCapture();
		};
		oDiv.setCapture && oDiv.setCapture();
		return false;
	};	
};
</script>
</head>

<body>

<div id="div1"></div>

</body>
</html>
